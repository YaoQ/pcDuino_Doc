# Maker fair Demo
以下是5月份Maker fair上要演示的两个Demo介绍，主要是接入LinkSpriteIO服务器的一些技术细节的讨论。

## Zigbee demo
### 基本设备和功能的介绍
1. 门磁
有一个开关，控制门磁传感器开启和关闭。当开启的时候，门被打开的话，会发送一个推送消息给APP.
2. 烟雾传感器
侦测到烟雾时发送信息给APP
3. 漏水检测
漏水时发送信息给APP
4. PIR运动检测
侦测到运动时发送信息给APP
5. 智能插座
控制开关就可以
6. 遥控器
7. SOS报警

这些传感器是通过zigbee链接到pcDuino，然后连上云

### ZigBee 数据###
| 名字 | 数据类型 |说明|APP操作（写即update，读即query）|
|--------|--------|-------|------|
|  门磁    |   bool     | 0：关门，1:开门|读|
|烟雾|bool| 0：未检测到烟雾;1：检测到烟雾|读|
|漏水|bool|0：未检测到水分;1：检测到水分|读|
|PIR|bool|0：未检测到运动;1：检测到运动|读|
|插座|bool|0：关;1：开|写|
|alert|bool|0:没有警报;1：有警报|读|

### JSON数据结构 ###
```JSON
{
    "door":"0",
	"smoke":"0",
	"leak":"0",
	"motion":"0",
    "switch":"0",
	"alert":"20"
}
```

### 实现细节 ###
1. 服务器地址
本地PC会共享出一个WiFi热点，连接pcDuino、LinkNode D1、Android等设备。
同时LinkSpriteIO服务也部署在此PC上，局域网IP地址设定为：**172.17.0.1** 。
所以访问LinkSpriteIO的API地址是：http://172.17.0.1/api/http

2. 警告方式的实现
由于LinkSpriteIO没法主动发送消息给APP或者设备，所以需要在APP或者设备端采用轮询的方式，去查询服务器上的数据，以此来模拟实现信息的实时采集。设定每隔**5s**查询一次数据。

3. 接入LinkSpriteIO服务
为了便于处理，以上所有传感器的数据只需要在LinkSpriteIO上创建一个DIY设备，保存在同一个JSON数据结构中即可。

### APP额外功能的实现 ###
1. 实现用户登录或者注册
2. 列出已有的设备


---

##LinkNode D1 Demo
### 基本设备和功能介绍###
1. 通过LINKER RELAY控制LED灯开关，APP发送控制命令
2. 门口的红外距离传感器。
当检测到有人1分还在门口是，控制buzzer报警，同时发送信息给APP
3. 温湿度传感器和1602 显示
1602显示温湿度数据，通过APP可以查看。
4. 马达风扇
模拟空调，APP控制马达开关，APP发送控制命令
5. 舵机
舵机控制窗户开关，APP发送控制命令
6. Linker O2
放在厨房检测氧气浓度，当氧气浓度降低时，发消息给APP

### LinkNode D1 data ###
| 名字 | 数据类型 |说明|APP操作（写即update，读即query）|
|--------|--------|-------|------|
|  开关    |   bool     | 0：关灯，1:关灯|写|
|警告|bool| 0：未检测到人;1：检测到人|读|
|温度|float|例如：24.5，即24.5摄氏度|读|
|湿度|int|例如：20,即20%的湿度|读|
|风扇|bool|0：关;1：开|写|
|舵机|int|输入脉宽，控制舵机转动的角度|写|
|氧气|float|例如，20，即含氧量为20%|读|

### json数据结构 ###
```JSON
{
	"door":"0",
	"fan":"0",
	"alert":"200",
	"temperature":"20.5",
    "humidity":"50",
	"fan":"0",
	"window":"30",
	"O2":"20"
}
```

备注：

1. 服务器地址
本地PC会共享出一个WiFi热点，连接pcDuino、LinkNode D1、Android等设备。
同时LinkSpriteIO服务也部署在此PC上，局域网IP地址设定为：**172.17.0.1** 。
所以访问LinkSpriteIO的API地址是：http://172.17.0.1/api/http

2. 警告方式的实现
由于LinkSpriteIO没法主动发送消息给APP或者设备，所以需要在APP或者设备端采用轮询的方式，去查询服务器上的数据，以此来模拟实现信息的实时采集。设定每隔**5s**查询一次数据。

3. 接入LinkSpriteIO服务
以上所有传感器的数据只需要在LinkSpriteIO上创建一个DIY设备，保存在同一个JSON数据结构中即可。

### APP额外功能的实现 ###
1. 实现用户登录或者注册
2. 列出已有的设备

